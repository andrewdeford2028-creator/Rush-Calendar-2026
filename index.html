<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Monthly Calendar</title>
  <style>
    :root{
      --bg: #0b0f17;
      --card: #101827;
      --muted: #9aa4b2;
      --text: #e6edf3;
      --border: rgba(255,255,255,.08);
      --accent: #7c3aed;
      --chip: rgba(124,58,237,.18);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      background: radial-gradient(1200px 700px at 10% 0%, rgba(124,58,237,.22), transparent 55%),
                  radial-gradient(900px 600px at 90% 10%, rgba(34,197,94,.16), transparent 55%),
                  var(--bg);
      color:var(--text);
      min-height:100vh;
    }
    .wrap{max-width:1100px; margin:0 auto; padding:24px 16px 56px;}
    header{
      display:flex; align-items:flex-start; justify-content:space-between; gap:16px;
      margin-bottom:18px;
    }
    .title{
      display:flex; flex-direction:column; gap:8px;
    }
    h1{margin:0; font-size:28px; letter-spacing:.2px}
    .sub{color:var(--muted); font-size:14px; line-height:1.35}
    .controls{
      display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; align-items:center;
    }
    .btn{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
      user-select:none;
      box-shadow: none;
      transition: transform .06s ease, background .15s ease, border-color .15s ease;
    }
    .btn:hover{background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.14);}
    .btn:active{transform: translateY(1px);}
    .pill{
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      padding:10px 12px;
      border-radius:12px;
      font-size:13px;
      color:var(--muted);
      display:flex; align-items:center; gap:8px;
      white-space:nowrap;
    }
    .pill strong{color:var(--text); font-weight:600}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(7, minmax(0, 1fr));
      gap:1px;
      background: rgba(255,255,255,.06);
    }
    .dow{
      padding:12px 10px;
      font-size:12px;
      color:var(--muted);
      background: rgba(255,255,255,.02);
      letter-spacing:.6px;
      text-transform:uppercase;
    }
    .day{
      min-height:120px;
      background: rgba(0,0,0,.12);
      padding:10px 10px 8px;
      position:relative;
    }
    .day.other{opacity:.45}
    .num{
      font-size:13px;
      color: var(--muted);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    .num .n{color: var(--text); font-weight:600}
    .todayBadge{
      font-size:11px;
      padding:3px 8px;
      border-radius:999px;
      border:1px solid rgba(124,58,237,.35);
      background: rgba(124,58,237,.16);
      color: #d7c8ff;
    }
    .events{margin-top:8px; display:flex; flex-direction:column; gap:6px;}
    .event{
      border:1px solid var(--border);
      background: rgba(255,255,255,.04);
      padding:7px 8px;
      border-radius:12px;
      font-size:12px;
      line-height:1.25;
      display:flex; gap:8px; align-items:flex-start;
    }
    .dot{
      width:10px; height:10px; border-radius:50%;
      margin-top:2px; flex:0 0 auto;
      box-shadow: 0 0 0 3px rgba(255,255,255,.04);
    }
    .event b{font-weight:650}
    .meta{color:var(--muted); margin-top:2px; font-size:11px}
    .event a{color:#c8b6ff; text-decoration:none}
    .event a:hover{text-decoration:underline}
    .footer{
      padding:14px 14px;
      display:flex; flex-wrap:wrap; gap:10px; align-items:center; justify-content:space-between;
      border-top:1px solid var(--border);
      background: rgba(0,0,0,.10);
    }
    .legend{display:flex; flex-wrap:wrap; gap:8px; align-items:center}
    .chip{
      display:flex; align-items:center; gap:8px;
      border:1px solid var(--border);
      background: rgba(255,255,255,.03);
      padding:7px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
    }
    .chip .dot{margin:0}
    .hint{color:var(--muted); font-size:12px}
    @media (max-width: 820px){
      .day{min-height:110px}
      header{flex-direction:column; align-items:stretch}
      .controls{justify-content:flex-start}
    }
    @media (max-width: 520px){
      .day{min-height:92px; padding:8px}
      h1{font-size:22px}
      .event{padding:6px 7px}
      .meta{display:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1 id="monthTitle">Monthly Calendar</h1>
        <div class="sub">
          Share this page as a public schedule. To edit events, open <b>index.html</b> and update the <b>EVENTS</b> array.
        </div>
      </div>

      <div class="controls">
        <button class="btn" id="prevBtn">← Prev</button>
        <div class="pill">Month: <strong id="pillMonth">—</strong></div>
        <button class="btn" id="nextBtn">Next →</button>
        <button class="btn" id="copyLinkBtn">Copy Share Link</button>
      </div>
    </header>

    <div class="card">
      <div class="grid" id="calendarGrid"></div>
      <div class="footer">
        <div class="legend" id="legend"></div>
        <div class="hint">
          Tip: add <b>?year=2026&month=1</b> to the URL (month is 1–12).
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * ========= EDIT YOUR EVENTS HERE =========
 * date format: "YYYY-MM-DD"
 * color: any CSS color (hex recommended)
 */
const EVENTS = [
  // Examples — replace these with your real schedule:
  { date: "2026-01-05", title: "Gym", time: "5:30 PM", tag: "Fitness", color: "#22c55e", note: "Leg day" },
  { date: "2026-01-07", title: "Chapter", time: "7:00 PM", tag: "Fraternity", color: "#7c3aed", location: "House" },
  { date: "2026-01-10", title: "Study Block", time: "2:00–5:00 PM", tag: "School", color: "#38bdf8", note: "CS + Spanish" },
  { date: "2026-01-17", title: "Party", time: "10:00 PM", tag: "Social", color: "#f97316", note: "Bring a friend" },
  { date: "2026-01-23", title: "Deadline", time: "11:59 PM", tag: "School", color: "#ef4444", note: "Submit assignment" },
];

/**
 * ========= CALENDAR RENDERING =========
 */
const $ = (id) => document.getElementById(id);

const monthNames = [
  "January","February","March","April","May","June",
  "July","August","September","October","November","December"
];
const dow = ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];

function pad(n){ return String(n).padStart(2,"0"); }
function toISODate(d){ return `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`; }

function parseParams(){
  const p = new URLSearchParams(location.search);
  let y = parseInt(p.get("year"), 10);
  let m = parseInt(p.get("month"), 10);
  if (!Number.isFinite(y) || y < 1970 || y > 2100) y = new Date().getFullYear();
  if (!Number.isFinite(m) || m < 1 || m > 12) m = (new Date().getMonth()+1);
  return { year:y, month:m };
}

function setParams(year, month){
  const p = new URLSearchParams(location.search);
  p.set("year", year);
  p.set("month", month);
  const newUrl = `${location.pathname}?${p.toString()}`;
  history.pushState({}, "", newUrl);
}

function groupEventsByDate(events){
  const map = new Map();
  for (const e of events){
    if (!map.has(e.date)) map.set(e.date, []);
    map.get(e.date).push(e);
  }
  // stable sort by time string (best-effort)
  for (const [k, arr] of map.entries()){
    arr.sort((a,b)=> (a.time||"").localeCompare(b.time||""));
  }
  return map;
}

function uniqueLegend(events){
  const seen = new Map();
  for (const e of events){
    const key = e.tag || "Event";
    if (!seen.has(key)){
      seen.set(key, e.color || "#a3a3a3");
    }
  }
  return [...seen.entries()].map(([tag,color])=>({tag,color}));
}

function buildCalendar(year, month){
  const grid = $("calendarGrid");
  grid.innerHTML = "";

  // Header row (days of week)
  for (const d of dow){
    const el = document.createElement("div");
    el.className = "dow";
    el.textContent = d;
    grid.appendChild(el);
  }

  const first = new Date(year, month-1, 1);
  const last = new Date(year, month, 0);
  const daysInMonth = last.getDate();

  // Convert JS Sunday=0 to Monday=0 index
  const firstDow = (first.getDay() + 6) % 7; // 0..6 where 0=Mon
  const today = new Date();
  const todayISO = toISODate(today);

  const eventsByDate = groupEventsByDate(EVENTS);

  // Leading blanks from previous month
  const prevMonthLast = new Date(year, month-1, 0);
  const prevDays = prevMonthLast.getDate();

  for (let i=0; i<firstDow; i++){
    const dayNum = (prevDays - firstDow + 1) + i;
    const d = new Date(year, month-2, dayNum);
    grid.appendChild(dayCell(d, eventsByDate, todayISO, true));
  }

  // Current month days
  for (let day=1; day<=daysInMonth; day++){
    const d = new Date(year, month-1, day);
    grid.appendChild(dayCell(d, eventsByDate, todayISO, false));
  }

  // Trailing blanks to fill 6 rows nicely (optional)
  const totalCells = 7 /*dow*/ + firstDow + daysInMonth;
  // after header, we want a multiple of 7
  const cellsAfterHeader = firstDow + daysInMonth;
  const trailing = (7 - (cellsAfterHeader % 7)) % 7;
  for (let i=1; i<=trailing; i++){
    const d = new Date(year, month, i);
    grid.appendChild(dayCell(d, eventsByDate, todayISO, true));
  }

  // Titles
  const title = `${monthNames[month-1]} ${year}`;
  $("monthTitle").textContent = title;
  $("pillMonth").textContent = title;

  // Legend
  const legend = $("legend");
  legend.innerHTML = "";
  const items = uniqueLegend(EVENTS);
  if (items.length === 0){
    legend.textContent = "No tags yet — add events to see a legend.";
  } else {
    for (const it of items){
      const chip = document.createElement("div");
      chip.className = "chip";
      const dot = document.createElement("span");
      dot.className = "dot";
      dot.style.background = it.color;
      const txt = document.createElement("span");
      txt.textContent = it.tag;
      chip.appendChild(dot);
      chip.appendChild(txt);
      legend.appendChild(chip);
    }
  }
}

function dayCell(dateObj, eventsByDate, todayISO, isOther){
  const cell = document.createElement("div");
  cell.className = "day" + (isOther ? " other" : "");

  const iso = toISODate(dateObj);
  const top = document.createElement("div");
  top.className = "num";

  const left = document.createElement("div");
  left.innerHTML = `<span class="n">${dateObj.getDate()}</span>`;

  top.appendChild(left);

  if (!isOther && iso === todayISO){
    const badge = document.createElement("span");
    badge.className = "todayBadge";
    badge.textContent = "Today";
    top.appendChild(badge);
  }

  cell.appendChild(top);

  const list = document.createElement("div");
  list.className = "events";

  const evts = eventsByDate.get(iso) || [];
  for (const e of evts.slice(0, 4)){ // show up to 4
    const row = document.createElement("div");
    row.className = "event";

    const dot = document.createElement("span");
    dot.className = "dot";
    dot.style.background = e.color || "#a3a3a3";

    const body = document.createElement("div");
    const titleLine = document.createElement("div");
    const t = document.createElement("b");
    t.textContent = e.title || "Event";
    titleLine.appendChild(t);

    if (e.time){
      const time = document.createElement("span");
      time.style.color = "var(--muted)";
      time.style.marginLeft = "6px";
      time.textContent = `• ${e.time}`;
      titleLine.appendChild(time);
    }

    body.appendChild(titleLine);

    const metaBits = [];
    if (e.tag) metaBits.push(e.tag);
    if (e.location) metaBits.push(e.location);
    if (e.note) metaBits.push(e.note);

    if (metaBits.length){
      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = metaBits.join(" · ");
      body.appendChild(meta);
    }

    if (e.link){
      const a = document.createElement("a");
      a.href = e.link;
      a.target = "_blank";
      a.rel = "noopener";
      a.textContent = "Open";
      a.style.marginTop = "4px";
      a.style.display = "inline-block";
      body.appendChild(a);
    }

    row.appendChild(dot);
    row.appendChild(body);
    list.appendChild(row);
  }

  if (evts.length > 4){
    const more = document.createElement("div");
    more.className = "meta";
    more.textContent = `+${evts.length - 4} more`;
    list.appendChild(more);
  }

  cell.appendChild(list);
  return cell;
}

function addNav(){
  let {year, month} = parseParams();

  $("prevBtn").addEventListener("click", () => {
    month--;
    if (month < 1){ month = 12; year--; }
    setParams(year, month);
    buildCalendar(year, month);
  });

  $("nextBtn").addEventListener("click", () => {
    month++;
    if (month > 12){ month = 1; year++; }
    setParams(year, month);
    buildCalendar(year, month);
  });

  $("copyLinkBtn").addEventListener("click", async () => {
    const url = location.href;
    try{
      await navigator.clipboard.writeText(url);
      $("copyLinkBtn").textContent = "Copied!";
      setTimeout(()=> $("copyLinkBtn").textContent = "Copy Share Link", 1200);
    }catch{
      prompt("Copy this link:", url);
    }
  });

  window.addEventListener("popstate", () => {
    const p = parseParams();
    buildCalendar(p.year, p.month);
  });
}

(function init(){
  const p = parseParams();
  // If URL has no params, default to Jan 2026 (edit this if you want)
  const hasParams = new URLSearchParams(location.search).has("year") || new URLSearchParams(location.search).has("month");
  if (!hasParams){
    setParams(2026, 1);
  }
  const cur = parseParams();
  addNav();
  buildCalendar(cur.year, cur.month);
})();
</script>
</body>
</html>
